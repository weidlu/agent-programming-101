好的，现在让我们来理解一下这个第一阶段的课程。

第一阶段主要是做了一个“乘法计算 Agent”的案例（示例里输入是整数）。核心目标是：让模型在遇到计算问题时，不靠自己“心算”，而是学会调用外部工具（本地函数）来完成计算。

之所以这样做，是因为：
1. 数学计算对大模型来说不总是可靠（容易算错、步骤不稳定）
2. 对于现成工具（比如计算器/代码函数）来说，计算是确定且简单的能力

这个例子展示了一个最基础的 Agent 模式：通过一个循环来完成任务（think -> act -> observe -> think ...）。

当用户发出一个指令时，模型一次会返回一个响应（一个 assistant message）。这个响应可能是中间过程：它会表达“我要调用某个工具”，并给出工具调用所需的信息。

具体流程如下：
1. 模型会以 JSON 结构来表达工具调用信息：包括要调用哪个工具、以及入参是什么（以 JSON 形式提供）。
2. 代码负责读取这些工具调用信息，真正执行对应的本地函数，并把执行结果作为 tool message 写回对话历史（messages）。
3. 模型拿到工具结果后，会继续思考下一步；一次响应里可能包含多个工具调用，所以代码需要逐个执行并逐个回填结果。
4. 最终当模型认为任务结束时，会输出普通文本答案；此时常见的现象是 `finish_reason` 为 `stop`，表示这次生成自然结束。
